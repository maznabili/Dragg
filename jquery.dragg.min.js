(function(e){e.fn.dragg=function(t){function n(t,n){var r={helper:"helper",onStart:function(){},onDrag:function(){},onDrop:function(){}};var n=e.extend({},r,n);var i,s,o,u,a,f,l,c,h,p,d,v,m,g;e(t).mousedown(function(r){r.preventDefault();if(r.target==t){if(e.isFunction(n.onStart)){n.onStart.call(t)}e(t).trigger("dragstart");v="down";r.stopPropagation();i=r.pageY;s=r.pageX;o=e(t).offset();u=e(t).width();a=e(t).height();c=i-o.top;h=s-o.left;d=e(t);p=e(t).clone();d.css("visibility","hidden");p.css({position:"absolute","z-index":1e3,width:u,left:o.left,top:o.top});p.attr("id",n.helper);p.appendTo("body");e("body").mousemove(function(t){t.preventDefault();if(v=="down"){i=t.pageY;s=t.pageX;f=s-h;l=i-c;p.hide();g=m;m=document.elementFromPoint(s,i);p.show();p.css({left:f,top:l});if(e.isFunction(n.onDrag)){n.onDrag.call(m)}e(p).trigger("drag");if(g!=m){e(m).trigger("dragin");e(g).trigger("dragout")}}});e("body").one("mouseup",function(t){v="up";e(m).trigger("drop");if(e.isFunction(n.onDrop)){n.onDrop.call(e(m))}p.remove();d.css("visibility","")})}})}this.each(function(e){n(this,t)})}})(jQuery)